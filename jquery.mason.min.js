/*
   --------------------------------
   Mason
   --------------------------------
   + https://github.com/olofbjerke/Mason
   + version 1.0.0
   + Copyright 2013 Olof Bjerke & Rostislav Raykov
   + Licensed under the MIT license
*/(function(e){e.fn.mason=function(t){var n=e.extend({},{onResizeStart:function(){},onResizeEnd:function(){},onResizeEndBeforeMasonry:function(){},onResizeEndAfterMasonry:function(){}},t||{}),r=e(this),i=[],s=[],o=0,u=r.width()-1,a=window.innerWidth,f=3.5,l=0,c=!0,h=0,p=0,d=0,v=function(){r.find("img").each(function(){i.push(e(this));h=Math.floor(window.innerHeight/f);e(this).height(h).css({display:"block","float":"left"}).data("top",e(this).position().top)});l=i[0].outerWidth(!0)-i[0].width()},m=function(){o=0;d=0;if(s.length===1){c&&s[0].width(u-l).height("auto");return}for(var e=0;e<s.length;e++)d+=s[e].width()/s[e].height();h=(u-l*s.length)/d;for(e=0;e<s.length;e++){s[e].height(h);p=s[e].width();s[e].width(p);o+=p+l}if(o!==u){p=s[s.length-1].width()+(u-o);s[s.length-1].width(p)}},g=function(){var e=i[0].data("top"),t=e,n=i.length,r=0,u=0;while(r<n){t=i[r].data("top");if(e!==t){m();s=[];u=0;o=0}o+=i[r].outerWidth(!0);s[u++]=i[r];e=t;r++}m();s=[];u=0;o=0;r=0},y=function(){for(var e=0;e<i.length;e++)i[e].height(window.innerHeight/f).width("auto").data("top",i[e].position().top)};return this.each(function(){v();g();var t;e(window).resize(function(){n.onResizeStart.call(r);clearTimeout(t);t=setTimeout(function(){n.onResizeEnd.call(r);u=r.width()-1;a=window.innerWidth;n.onResizeEndBeforeMasonry.call(r);y();g();n.onResizeEndAfterMasonry.call(r)},500)})})}})(jQuery);